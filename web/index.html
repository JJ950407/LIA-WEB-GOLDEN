<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIA Pagar√©</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Sidebar -->
  <aside class="wizard-sidebar" id="sidebar">
    <div class="sidebar-header">
      <span class="sidebar-label">ASISTENTE</span>
    </div>
    <nav class="wizard-steps">
      <div class="step-item active" data-step="1" data-step-id="docs">
        <span class="step-number">01</span>
        <span class="step-name">Documentos</span>
      </div>
      <div class="step-item" data-step="2" data-step-id="venta">
        <span class="step-number">02</span>
        <span class="step-name">Venta y pagos</span>
      </div>
      <div class="step-item" data-step="3" data-step-id="cliente">
        <span class="step-number">03</span>
        <span class="step-name">Cliente y deudor</span>
      </div>
      <div class="step-item" data-step="4" data-step-id="predio">
        <span class="step-number">04</span>
        <span class="step-name">Predio y testigos</span>
      </div>
      <div class="step-item" data-step="5" data-step-id="resumen">
        <span class="step-number">05</span>
        <span class="step-name">Resumen final</span>
      </div>
    </nav>
  </aside>
  
  <!-- Overlay para mobile -->
  <div class="sidebar-overlay" id="sidebar-overlay"></div>
  
  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="top-header">
      <button type="button" class="menu-toggle" id="menu-toggle" aria-label="Abrir men√∫">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <div class="header-logo-container">
        <img src="assets/adein.png" class="header-logo" alt="ADEIN">
      </div>
      <button type="button" class="logout-btn" id="logout-button">Cerrar sesi√≥n</button>
    </header>
    
    <!-- Fondo animado sutil -->
    <div class="main-background">
      <div class="bg-grid"></div>
    </div>
    
    <!-- Wizard Container -->
    <div class="wizard-container">
      <!-- Step Header -->
      <div class="step-header">
        <span class="step-label">ASISTENTE</span>
        <h1>Paso <span id="current-step-num">1</span> de <span id="total-steps">5</span></h1>
        <div class="step-progress-bar">
          <div class="step-progress-fill" id="step-progress-fill" style="width: 20%"></div>
        </div>
      </div>
      
      <!-- Wizard Card -->
      <div class="wizard-card glass-effect">
        <form id="wizard" novalidate>
          <section class="step" id="step-docs" data-step="docs">
            <div class="card">
              <h2>1. Documentos a generar</h2>
              <p>Selecciona el tipo de documentos.</p>
              <div class="options">
                <label class="option">
                  <input type="radio" name="tipoDocumento" value="contrato" data-required="true" />
                  <span>Contrato</span>
                </label>
                <label class="option">
                  <input type="radio" name="tipoDocumento" value="pagares" data-required="true" />
                  <span>Pagar√©s</span>
                </label>
                <label class="option">
                  <input type="radio" name="tipoDocumento" value="ambos" data-required="true" />
                  <span>Ambos</span>
                </label>
                <span class="error"></span>
              </div>
            </div>
          </section>

          <section class="step" id="step-venta" data-step="venta">
            <div class="card">
              <h2>2. Venta y pagos</h2>
              <div class="grid">
                <label class="field">
                  <span>Fecha de emisi√≥n del lote</span>
                  <input type="text" id="fechaEmision" placeholder="hoy o 24/12/2025" data-required="true" data-type="date" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Monto total de la venta</span>
                  <input type="text" id="total" placeholder="$250,000" data-required="true" data-type="money" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Enganche</span>
                  <input type="text" id="enganche" placeholder="$50,000" data-required="true" data-type="money" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Mensualidad</span>
                  <input type="text" id="mensual" placeholder="$12,500" data-required="true" data-type="money" />
                  <span class="error"></span>
                </label>
              </div>

              <div class="divider"></div>

              <div class="field">
                <span>¬øHabr√° anualidades especiales?</span>
                <div class="options">
                  <label class="option">
                    <input type="radio" name="anualidades" value="si" data-required="true" />
                    <span>S√≠</span>
                  </label>
                  <label class="option">
                    <input type="radio" name="anualidades" value="no" data-required="true" />
                    <span>No</span>
                  </label>
                  <span class="error"></span>
                </div>
              </div>

              <div class="grid" id="anualidades-fields">
                <label class="field">
                  <span>Monto de anualidad</span>
                  <input type="text" id="anualidadMonto" placeholder="$15,000" data-type="money" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Cantidad de anualidades</span>
                  <input type="number" id="numeroAnualidades" min="0" placeholder="3" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Mes de vencimiento</span>
                  <input type="text" id="anualidadMes" placeholder="febrero o 2" data-required="true" />
                  <span class="error"></span>
                </label>
              </div>

              <div class="grid">
                <label class="field">
                  <span>Regla 15/30</span>
                  <div class="options">
                    <label class="option">
                      <input type="radio" name="regla1530" value="este" data-required="true" />
                      <span>Este mes</span>
                    </label>
                    <label class="option">
                      <input type="radio" name="regla1530" value="siguiente" data-required="true" />
                      <span>Siguiente mes</span>
                    </label>
                  </div>
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Inter√©s moratorio anual (%)</span>
                  <input type="number" id="moratorios" min="0" max="100" step="0.01" placeholder="2" data-required="true" data-type="percent" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Inter√©s anual cl√°usula cuarta (%)</span>
                  <input type="number" id="interes" min="0" max="100" step="0.01" placeholder="1.5" data-required="true" data-type="percent" />
                  <span class="error"></span>
                </label>
              </div>
            </div>
          </section>

          <section class="step" id="step-cliente" data-step="cliente">
            <div class="card">
              <h2>3. Cliente y deudor</h2>
              <div class="grid">
                <label class="field">
                  <span>Beneficiario (a la orden de)</span>
                  <input type="text" id="beneficiario" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Nombre del vendedor</span>
                  <input type="text" id="vendedorNombre" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Domicilio del vendedor</span>
                  <input type="text" id="vendedorDomicilio" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Nombre completo del deudor</span>
                  <input type="text" id="deudor" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>G√©nero</span>
                  <select id="deudorGenero" data-required="true">
                    <option value="">Selecciona...</option>
                    <option value="Hombre">Hombre</option>
                    <option value="Mujer">Mujer</option>
                  </select>
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Direcci√≥n completa del deudor</span>
                  <input type="text" id="direccion" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Poblaci√≥n (ciudad, estado, C.P.)</span>
                  <input type="text" id="poblacion" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Lugar de expedici√≥n</span>
                  <input type="text" id="lugarExpedicion" data-required="true" />
                  <span class="error"></span>
                </label>
              </div>

              <label class="toggle">
                <input type="checkbox" id="lugarPagoIgual" checked />
                <span>El lugar de pago es igual al de expedici√≥n</span>
              </label>

              <div class="grid" id="lugarPagoContainer">
                <label class="field">
                  <span>Lugar de pago (otro)</span>
                  <input type="text" id="lugarPago" data-required="true" />
                  <span class="error"></span>
                </label>
              </div>

              <div class="grid">
                <label class="field">
                  <span>Tel√©fono del cliente</span>
                  <input type="text" id="telefono" placeholder="+52 55 1234 5678" data-required="true" data-type="phone" />
                  <span class="error"></span>
                </label>
              </div>
            </div>
          </section>

          <section class="step" id="step-predio" data-step="predio">
            <div class="card">
              <h2>4. Predio y testigos</h2>
              <div class="grid">
                <label class="field">
                  <span>Nombre del predio</span>
                  <input type="text" id="predioNombre" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Ubicaci√≥n completa</span>
                  <input type="text" id="predioUbicacion" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Municipio</span>
                  <input type="text" id="predioMunicipio" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Manzana/Lote</span>
                  <input type="text" id="predioManzanaLote" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Superficie m¬≤</span>
                  <input type="text" id="predioSuperficie" data-required="true" />
                  <span class="error"></span>
                </label>
              </div>

              <div class="divider"></div>

              <div class="grid">
                <label class="field">
                  <span>Lindero Norte (metros | colinda)</span>
                  <input type="text" id="linderoNorte" placeholder="10 | con camino" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Lindero Sur (metros | colinda)</span>
                  <input type="text" id="linderoSur" placeholder="10 | con lote 23" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Lindero Oriente (metros | colinda)</span>
                  <input type="text" id="linderoOriente" placeholder="32 | con terreno ejidal" data-required="true" />
                  <span class="error"></span>
                </label>
                <label class="field">
                  <span>Lindero Poniente (metros | colinda)</span>
                  <input type="text" id="linderoPoniente" placeholder="32 | con barranca" data-required="true" />
                  <span class="error"></span>
                </label>
              </div>

              <label class="field">
                <span>Testigos (Testigo 1 | Testigo 2)</span>
                <input type="text" id="testigos" placeholder="Nombre 1 | Nombre 2" data-required="true" />
                <span class="error"></span>
              </label>
            </div>
          </section>

          <section class="step" id="step-resumen" data-step="resumen">
            <div class="card">
              <h2>5. Resumen final</h2>
              <div class="summary" id="summary-venta"></div>
              <button type="button" class="link" data-edit="venta">Editar venta y pagos</button>

              <div class="summary" id="summary-cliente"></div>
              <button type="button" class="link" data-edit="cliente">Editar cliente y deudor</button>

              <div class="summary" id="summary-predio"></div>
              <button type="button" class="link" data-edit="predio">Editar predio y testigos</button>

              <button type="button" class="primary" id="submit">Aprobar y generar documentos</button>
              <button type="button" class="btn-new-contract" id="btn-new-contract">+ Nuevo contrato</button>
              <p class="status" id="status"></p>
            </div>
          </section>

          <div class="nav">
            <button type="button" class="ghost" id="prev">Atr√°s</button>
            <button type="button" class="primary" id="next">Continuar</button>
          </div>
        </form>
      </div>

      <section class="results hidden" id="results">
        <div class="card">
          <h2>Documentos generados</h2>
          <div class="result-actions">
            <a class="primary" id="download-contrato" href="#" target="_blank" rel="noreferrer">Descargar contrato PDF</a>
            <a class="primary" id="download-pagares" href="#" target="_blank" rel="noreferrer">Descargar pagar√©s PDF</a>
            <button class="ghost" id="print-pagares" type="button">Imprimir pagar√©s</button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Overlay de progreso de generaci√≥n -->
  <div id="generationOverlay" class="progress-overlay" aria-hidden="true">
    <div class="progress-card">
      <div class="progress-icon">üìÑ</div>
      <h3>Generando documentos</h3>
      <p class="progress-text" id="progressText">Iniciando...</p>
      <div class="progress-bar-container">
        <div class="progress-fill" id="generationProgressFill"></div>
      </div>
      <p class="progress-percent" id="progressPercent">0%</p>
      <p class="progress-hint">No cierres esta ventana</p>
    </div>
  </div>

  <div id="liaLoaderOverlay" aria-hidden="true">
    <div class="loader-card" role="dialog" aria-modal="true" aria-label="Generando documentos">
      <div class="loader-top">
        <div class="loader-title">
          <strong id="liaLoaderTitle">Generando documentos‚Ä¶</strong>
          <span id="liaLoaderStep">Preparando‚Ä¶</span>
        </div>
        <div class="spinner" aria-hidden="true"></div>
      </div>

      <div class="progress">
        <div class="progress-bar" id="liaProgressBar"></div>
      </div>

      <div class="loader-foot">
        <span id="liaLoaderPct">0%</span>
        <span>No cierres esta ventana</span>
      </div>
    </div>
  </div>

  <script src="auth.js"></script>
  <script src="app.js"></script>
</body>
</html>
